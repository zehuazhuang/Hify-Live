import SwiftUI
import SwiftfulRouting
import Combine

//黑名单
struct bfoXTzIM4dlkv07MZv45zoMZVs23: View {
    
    @StateObject private var nd55l6NRwWuVUnbReUhjS3d1Ivg = TPb21z0U.eDNcFBMyyi
    
    @Environment(\.router) var ivHIH8tMIw2gJg4o
    
    @State private var uT6eHPE0Of05afFQdv9n: Bool = false
    @State private var auGm8teVpyXJCC2rxfZsMECz: Int = 0
    
    @State private var nmSJFpU7zyBM2yr: Bool = false
    
    var body: some View {
        ZStack {
            Color(red: 13/255, green: 13/255, blue: 18/255)
            VStack(spacing: 24) {
                HStack(spacing: 12) {
                    Button{
                        ivHIH8tMIw2gJg4o.dismissScreen()
                    } label: {
                        ZJ7h766mz(tMmEWWlfgUag: "mHNiF9OWVl")
                            .frame(width: 24,height: 24)
                    }
                    Text("1DvzZzsH5HkmS0//ed72fg==".bFHEatcgE4zzU9TCfDonsu())
                        .g0LIIcoZQsOjyND9(
                            size: 18,
                            weight: .semibold
                        )
                    Spacer()
                }
                .padding(.top,58)
                .padding(.leading,16)
                if nd55l6NRwWuVUnbReUhjS3d1Ivg.er9cv27P1Ndd {
                    BMTU5LVVTQYLXCZaN()
                } else if nd55l6NRwWuVUnbReUhjS3d1Ivg.lLPppWtfV5O6YMV5wl9nsA4nt.isEmpty{
                    VStack(spacing: 0,){
                        ZJ7h766mz(tMmEWWlfgUag: "npIyAxb6vfM073130T9MwCJY8")
                            .frame(width: 343,height: 248)
                            .padding(.top,90)
                        Spacer()
                    }
                } else {
                    ScrollView {
                        VStackLayout(spacing: 12) {
                            ForEach(nd55l6NRwWuVUnbReUhjS3d1Ivg.lLPppWtfV5O6YMV5wl9nsA4nt.indices, id: \.self) { opa5o0dODUVnIW2kkdf in
                                let mnnVXxRXFee1ZJ8ehOc9UwA = nd55l6NRwWuVUnbReUhjS3d1Ivg.lLPppWtfV5O6YMV5wl9nsA4nt[opa5o0dODUVnIW2kkdf]
                                HStack(spacing: 0) {
                                    HStack(spacing: 10) {
                                        Circle()
                                            .fill(Color.white.opacity(0.19))
                                            .frame(width: 48)
                                            .overlay(alignment: .center) {
                                                rP6kV1bS8qX3nT7(pR9wQ2mL6hY5dF1: mnnVXxRXFee1ZJ8ehOc9UwA.string("epJeJ5mHHtIgvijlrcmUsg==".bFHEatcgE4zzU9TCfDonsu()))
                                                    .frame(width: 44,height: 44)
                                                    .clipShape(Circle())
                                            }
                                        VStack(alignment: .leading, spacing: 7) {
                                            Text(mnnVXxRXFee1ZJ8ehOc9UwA.string("BRZTNxzF2tiDYdydqQz6ZQ==".bFHEatcgE4zzU9TCfDonsu()))
                                                .g0LIIcoZQsOjyND9(
                                                    size: 16,
                                                    weight: .semibold
                                                )
                                                .lineLimit(1)
                                                .truncationMode(.tail)
                                            Text("zJ15CvylxUyAMrGGzo0H4Q==".bFHEatcgE4zzU9TCfDonsu() + mnnVXxRXFee1ZJ8ehOc9UwA.string("oPJJrP0sgO34aN0D8qwL6Q==".bFHEatcgE4zzU9TCfDonsu()))
                                                .g0LIIcoZQsOjyND9(
                                                    color: Color.white.opacity(0.6)
                                                )
                                        }
                                    }
                                    Spacer()
                                    Button{
                                        Task {
                                            let ehiJO3: Int = Int(mnnVXxRXFee1ZJ8ehOc9UwA.string("oPJJrP0sgO34aN0D8qwL6Q==".bFHEatcgE4zzU9TCfDonsu())) ?? 0
                                            auGm8teVpyXJCC2rxfZsMECz = ehiJO3
                                            uT6eHPE0Of05afFQdv9n = true
                                            let vutSbVgrqVlU9: String = mnnVXxRXFee1ZJ8ehOc9UwA.string("HKd/L3NovhrAFZdHjyoJDg==".bFHEatcgE4zzU9TCfDonsu())
                                            let wiCvWb: Bool =  await nd55l6NRwWuVUnbReUhjS3d1Ivg.hxEXXV2aWMNka7HM2qhr1Qccen3rB(iN2NID: ehiJO3, lCOFD: vutSbVgrqVlU9)
                                            if !wiCvWb, let pPBGkix66avlJS7b9 = nd55l6NRwWuVUnbReUhjS3d1Ivg.lT3KlfvYcav5 {
                                                QlzJ4yJcxJXY2paN.rmjXXUocPJY2DEcTxiziKU6Nehjz1q.m3nArFwdHhI82cPUmiqW8PtaaHz(pPBGkix66avlJS7b9, z2E1geUN5miQ95SpoCG: false)
                                            } else {
                                                withAnimation(.spring(response: 0.45, dampingFraction: 0.75)) {
                                                    nmSJFpU7zyBM2yr = true
                                                }
                                                
                                                Task {
                                                    try? await Task.sleep(nanoseconds: UInt64(1.8 * 1_000_000_000))
                                                    withAnimation(.easeOut(duration: 0.25)) {
                                                        nmSJFpU7zyBM2yr = false
                                                    }
                                                }
                                            }
                                            uT6eHPE0Of05afFQdv9n = false
                                        }
                                    } label: {
                                        RoundedRectangle(cornerRadius: 325)
                                            .fill(
                                                LinearGradient(colors: [Color(red: 211/255, green: 75/255, blue: 117/255),Color(red: 237/255, green: 168/255, blue: 102/255)], startPoint: .leading, endPoint: .trailing)
                                            )
                                            .frame(width: 92,height: 33)
                                            .overlay(alignment: .center) {
                                                if uT6eHPE0Of05afFQdv9n && auGm8teVpyXJCC2rxfZsMECz == Int(mnnVXxRXFee1ZJ8ehOc9UwA.string("oPJJrP0sgO34aN0D8qwL6Q==".bFHEatcgE4zzU9TCfDonsu())) {
                                                    sEzi1icPpNqqO()
                                                } else {
                                                    Text("kYFAuWrCeDmlqT7m07Eslw==".bFHEatcgE4zzU9TCfDonsu())
                                                        .g0LIIcoZQsOjyND9(
                                                            weight: .medium,
                                                            color: Color.white
                                                        )
                                                }
                                            }
                                    }
                                }
                                .padding(.horizontal,8)
                                .padding(.vertical,14)
                                .background(
                                    RoundedRectangle(cornerRadius: 12)
                                        .fill(
                                            LinearGradient(colors: [Color(red: 120/255, green: 223/255, blue: 1, opacity: 0.1),Color(red: 84/255, green: 105/255, blue: 199/255, opacity: 0.15)], startPoint: .leading, endPoint: .trailing)
                                        )
                                )
                                .padding(.horizontal,16)
                            }
                        }
                    }
                }
            }
        }
        .ignoresSafeArea()
        .task {
            await nd55l6NRwWuVUnbReUhjS3d1Ivg.rlvC3Or8aIGlvbdryVCVS9bqGC9D()
        }
        .overlay(alignment: .center) {
            if nmSJFpU7zyBM2yr {
                qEWpZaKRaGAzucuOroFb5prh9i6OCaLO()
            }
        }
    }
}

//按钮loading
struct sEzi1icPpNqqO: View {
    
    @State private var yvBsL4r4wydkRPEBSAxc = false
    
    var body: some View {
        ZStack {
            Circle()
                .stroke(Color.white.opacity(0.4), style: StrokeStyle(lineWidth: 2, lineCap: .round))
                .frame(width: 20, height: 20)
            Circle()
                .trim(from: 0.0, to: 0.25)
                .stroke(Color.white,style: StrokeStyle(lineWidth: 2, lineCap: .round))
                .frame(width: 20, height: 20)
                .rotationEffect(.degrees(yvBsL4r4wydkRPEBSAxc ? 360 : 0))
                .animation(.linear(duration: 1).repeatForever(autoreverses: false), value: yvBsL4r4wydkRPEBSAxc)
                .onAppear {
                    yvBsL4r4wydkRPEBSAxc = true
                }
        }
    }
}

//取消拉黑toast
struct qEWpZaKRaGAzucuOroFb5prh9i6OCaLO: View {
    var body: some View {
        HStack(spacing: 5) {
            ZJ7h766mz(tMmEWWlfgUag: "kwhbZcFz")
                .frame(width: 24,height: 24)
            Text("my2w4ZPVAqkDqk/c0SRL2/0ZhScwwl91RJWtgeeNumE=".bFHEatcgE4zzU9TCfDonsu())
                .g0LIIcoZQsOjyND9(
                    size: 16
                )
        }
        .padding(.vertical,12)
        .padding(.horizontal,16)
        .background(
            RoundedRectangle(cornerRadius: 8)
                .fill(Color(red: 34/255, green: 34/255, blue: 38/255, opacity: 0.8))
        )
        .scaleEffect(1.0)
        .transition(
            .scale(scale: 0.6)
            .combined(with: .opacity)
        )
    }
}

#Preview {
    bfoXTzIM4dlkv07MZv45zoMZVs23()
}

@MainActor
class TPb21z0U: ObservableObject {
    
    static let eDNcFBMyyi = TPb21z0U()
    
    @Published var lLPppWtfV5O6YMV5wl9nsA4nt: [[String: Any]] = []
    @Published var er9cv27P1Ndd = false
    @Published var lT3KlfvYcav5: String?
    private var eJp4p4AH6hoOVGFxQir89aeBTTQH0Sf = true
    
    // MARK: - 异步加载黑名单
    func rlvC3Or8aIGlvbdryVCVS9bqGC9D() async {
        if !eJp4p4AH6hoOVGFxQir89aeBTTQH0Sf { return }
        er9cv27P1Ndd = true
        defer { er9cv27P1Ndd = false }
        do {
            // 调用封装的 async/await 请求
            let vSlMvwgw1: JUsmLn3i59tKLD7RL294I0nAG = try await WOKmjUjM.dq0JZ94RcmDb3.j36UQlXa0(
                xH0OPzEYR4M5ewWkZQAveq6Vy7: "JsjRNSam5UvtKQJEQpC4RvzWSwNp4rlcpzY4woCOr7Q=".bFHEatcgE4zzU9TCfDonsu(),
                tD5tEJZTT0NlaIX7eMREG92BhO3n: [String: String](),
            )
            
            if vSlMvwgw1.code == "ZFEsEWiI1qFkYs8V4dAooA==".bFHEatcgE4zzU9TCfDonsu() {
                guard let sxw3p4Owl9o6W9w8Bg = vSlMvwgw1.result else {
                    self.lLPppWtfV5O6YMV5wl9nsA4nt = []
                    return
                }
                
                // 解密，得到 JSON 字符串
                let yx9aSprEvK1Ejs = sxw3p4Owl9o6W9w8Bg.hL9dV3bQ2fK6sJ8p() // String
                
                // 转成 [[String: Any]]
                if let cImr0rJR1o1dFmztTg = yx9aSprEvK1Ejs.data(using: .utf8),
                   let gAI5Lve = try? JSONSerialization.jsonObject(with: cImr0rJR1o1dFmztTg) as? [[String: Any]] {
                    self.lLPppWtfV5O6YMV5wl9nsA4nt = gAI5Lve
                    self.eJp4p4AH6hoOVGFxQir89aeBTTQH0Sf = false
                } else {
                    self.lLPppWtfV5O6YMV5wl9nsA4nt = []
                }
            } else {
                lT3KlfvYcav5 = vSlMvwgw1.message
            }
        } catch {
            lT3KlfvYcav5 = "AkBi9mf2H0oNTOICk4iuDDyAmGWR32czZneAuRha104bvmslSFK3z4L4FCdIAGe/psAR4UwiKicB7m+0XtU+3A==".bFHEatcgE4zzU9TCfDonsu()
            //            print("请求失败:", error)
        }
    }
    
    // MARK: - 取消拉黑（userId、yxAccid）
    func hxEXXV2aWMNka7HM2qhr1Qccen3rB(iN2NID: Int, lCOFD: String) async -> Bool {
        do {
            let otSFfF0QgnGZCEXuL0RMm0RAtV2RZUV: JUsmLn3i59tKLD7RL294I0nAG = try await WOKmjUjM.dq0JZ94RcmDb3.j36UQlXa0(
                xH0OPzEYR4M5ewWkZQAveq6Vy7: "Z53mkVKRc+/3aEy88R1ziVjUXb5ZXXyoGLM0HtCaN3g=".bFHEatcgE4zzU9TCfDonsu(),
                tD5tEJZTT0NlaIX7eMREG92BhO3n: wZA6oIowbVae5FtrdTTFAaiz3WYirkvI(sjNradeQwuW02y7kiF6ozTd: 1, qRdFOAhW7ayZvfxQCha: iN2NID, eTf1z86aGoFMNQJUV7Tx: lCOFD)
            )
            print(otSFfF0QgnGZCEXuL0RMm0RAtV2RZUV.code)
            if otSFfF0QgnGZCEXuL0RMm0RAtV2RZUV.code == "ZFEsEWiI1qFkYs8V4dAooA==".bFHEatcgE4zzU9TCfDonsu() {
                self.lLPppWtfV5O6YMV5wl9nsA4nt.removeAll { ($0.string("oPJJrP0sgO34aN0D8qwL6Q==".bFHEatcgE4zzU9TCfDonsu())) == String(iN2NID) }
                self.eJp4p4AH6hoOVGFxQir89aeBTTQH0Sf = true
                return true
            } else {
                lT3KlfvYcav5 = otSFfF0QgnGZCEXuL0RMm0RAtV2RZUV.message
                return false
            }
        } catch {
            lT3KlfvYcav5 = "tZ+pN8lVE564npmaryD+plnzzxOXEOnSnAB7fGVLwWNrGStWJ9VPXPLKvw8zP1inJgUgB4tE2/87lVtr5/j7Ag==".bFHEatcgE4zzU9TCfDonsu()
            //            print("取消拉黑失败:", error)
            return false
        }
    }
    
    // MARK: - 拉黑（userId、yxAccid）
    func ngIp5pudxny8o0Mdsqv(fnLUzabLaul9Cx: Int, mwNKAPngt: String) async -> Bool {
        do {
            
            let qBiYBwzAdHAVgLTRNxn0QPPieDHjrKj: JUsmLn3i59tKLD7RL294I0nAG = try await WOKmjUjM.dq0JZ94RcmDb3.j36UQlXa0(
                xH0OPzEYR4M5ewWkZQAveq6Vy7: "CfhquXmyZHp3DW0wpE2+Fr38IYBhI3i+2pTnmmC0zfk=".bFHEatcgE4zzU9TCfDonsu(),
                tD5tEJZTT0NlaIX7eMREG92BhO3n: wZA6oIowbVae5FtrdTTFAaiz3WYirkvI(sjNradeQwuW02y7kiF6ozTd: 1, qRdFOAhW7ayZvfxQCha: fnLUzabLaul9Cx, eTf1z86aGoFMNQJUV7Tx: mwNKAPngt)
            )
            print(qBiYBwzAdHAVgLTRNxn0QPPieDHjrKj.code)
            if qBiYBwzAdHAVgLTRNxn0QPPieDHjrKj.code == "ZFEsEWiI1qFkYs8V4dAooA==".bFHEatcgE4zzU9TCfDonsu() {
                // 成功加入黑名单
                self.eJp4p4AH6hoOVGFxQir89aeBTTQH0Sf = true
                return true
            } else {
                lT3KlfvYcav5 = qBiYBwzAdHAVgLTRNxn0QPPieDHjrKj.message
                return false
            }
        } catch {
            lT3KlfvYcav5 = "6NkpnYcqvjb4rXfuY8EFdyZVtBNeb7SdDQlnwdfK4PWhOI7kFcE25u+V+BCiqgE8/j4tTA7Jk8yvWuUsxIscgw==".bFHEatcgE4zzU9TCfDonsu()
            print("Sph7QjtQ9wyBx41H5XhztLHkavBN9bomvy8v5zW0vxk=".bFHEatcgE4zzU9TCfDonsu(), error)
            return false
        }
    }
}

//拉黑参数配置
struct wZA6oIowbVae5FtrdTTFAaiz3WYirkvI: Codable {
    
    let sjNradeQwuW02y7kiF6ozTd: Int //type
    let qRdFOAhW7ayZvfxQCha: Int //userId
    let eTf1z86aGoFMNQJUV7Tx: String //yxAccid
    
    func encode(to encoder: Encoder) throws {
        var e8I3p = encoder.container(keyedBy: bonDyqD2YnaVJW.self)
        
        try e8I3p.encode(
            sjNradeQwuW02y7kiF6ozTd,
            forKey: bonDyqD2YnaVJW(
                "LwIiTP4Kb0lJgLdJnsi2xQ==".bFHEatcgE4zzU9TCfDonsu()
            )
        )
        
        try e8I3p.encode(
            qRdFOAhW7ayZvfxQCha,
            forKey: bonDyqD2YnaVJW(
                "oPJJrP0sgO34aN0D8qwL6Q==".bFHEatcgE4zzU9TCfDonsu()
            )
        )
        
        try e8I3p.encode(
            eTf1z86aGoFMNQJUV7Tx,
            forKey: bonDyqD2YnaVJW(
                "HKd/L3NovhrAFZdHjyoJDg==".bFHEatcgE4zzU9TCfDonsu()
            )
        )
    }
}
